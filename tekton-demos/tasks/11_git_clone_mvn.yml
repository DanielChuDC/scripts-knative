apiVersion: tekton.dev/v1alpha1
kind: TaskRun
metadata:
  generateName: git-clone-mvn-
spec:
  taskSpec:
    inputs:
      resources:
      - name: mysources
        type: git
    steps:
    - name: ls1
      image: fedora
      command: ['ls', '/workspace/mysources/java/springboot']
    - name: mkdir
      image: fedora
      command: ['bash']
      args: ["-c","mkdir -p /workspace/.m2"]
    - name: ls2
      image: fedora
      command: ['ls', '-la']
    - name: mvn-build
      image: maven:3.6.0-jdk-11
#      image: maven:3.6.0-jdk-11-slim
#      image: gcr.io/cloud-builders/mvn
      env:
      - name: USER_HOME
        value: /workspace
      command: ['mvn']
      args:
      - clean 
      - package
      workingDir:  '/workspace/mysources/java/springboot'      
  inputs:
    resources:
    - name: mysources
      resourceSpec:
        type: git
        params:
          - name: revision
            value: master
          - name: url
            value: https://github.com/burrsutter/knative-tutorial-greeter.git
